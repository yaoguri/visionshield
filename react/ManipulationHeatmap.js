var ManipulationHeatmap;(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{e.r(t),e.d(t,{default:()=>c});const a=React;var r=e.n(a);function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(r=l.call(a)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw n}}return o}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}const c=function(e){var t=e.videoData,i=e.heatmapData,o=l((0,a.useState)(0),2),c=o[0],s=o[1],u=l((0,a.useState)(!1),2),m=u[0],d=u[1],f=l((0,a.useState)(.7),2),p=f[0],g=f[1],b=(0,a.useRef)(null),h=(0,a.useRef)(null),v=(0,a.useRef)(null),y=(null==i?void 0:i.frames)||[];(0,a.useEffect)((function(){return function(){v.current&&cancelAnimationFrame(v.current)}}),[]),(0,a.useEffect)((function(){var e=b.current;if(e&&0!==y.length){var t=function(){var a=e.currentTime,r=e.duration/y.length,n=Math.min(Math.floor(a/r),y.length-1);s(n),x(n),m&&(v.current=requestAnimationFrame(t))};m?(e.play(),v.current=requestAnimationFrame(t)):(e.pause(),v.current&&cancelAnimationFrame(v.current))}}),[m,y]);var x=function(e){var t=h.current,a=b.current;if(t&&a&&y[e]){var r=t.getContext("2d");t.width=a.videoWidth,t.height=a.videoHeight,r.clearRect(0,0,t.width,t.height),r.drawImage(a,0,0,t.width,t.height);var n=y[e].probability_fake||0;if(n>.3){var l=Math.min(n,.8)*p,i=t.width/2,o=t.height/2,c=r.createRadialGradient(i,o,10,i,o,t.width/2);c.addColorStop(0,"rgba(255, 0, 0, ".concat(l,")")),c.addColorStop(.7,"rgba(255, 165, 0, ".concat(.7*l,")")),c.addColorStop(1,"rgba(255, 255, 0, 0)"),r.fillStyle=c,r.fillRect(0,0,t.width,t.height),r.fillStyle="rgba(255, 255, 255, 0.8)",r.font="bold 16px Arial",r.fillText("Manipulation Probability: ".concat((100*n).toFixed(1),"%"),20,30)}}},E=function(e){var t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))};return r().createElement("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden"},r().createElement("div",{className:"p-4 border-b"},r().createElement("h2",{className:"text-lg font-semibold text-gray-800"},"Manipulation Heatmap"),r().createElement("p",{className:"text-sm text-gray-600"},"Visualizing areas of potential manipulation in the video.")),r().createElement("div",{className:"relative bg-black aspect-video"},null!=t&&t.url?r().createElement(r().Fragment,null,r().createElement("video",{ref:b,className:"w-full h-full",src:t.url,onLoadedMetadata:function(){return x(c)},onEnded:function(){return d(!1)}}),r().createElement("canvas",{ref:h,className:"absolute top-0 left-0 w-full h-full pointer-events-none"}),r().createElement("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4"},r().createElement("div",{className:"flex items-center text-white"},r().createElement("button",{className:"w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center mr-3 hover:bg-opacity-30",onClick:function(){return d(!m)}},m?r().createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})):r().createElement("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},r().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"}))),r().createElement("div",{className:"flex-1 mx-2"},r().createElement("div",{className:"h-1 bg-white bg-opacity-30 rounded relative"},r().createElement("div",{className:"absolute h-1 bg-purple-600 rounded",style:{width:"".concat(c/(y.length-1)*100,"%")}}))),r().createElement("div",{className:"text-sm"},b.current?E(b.current.currentTime):"0:00"," /",b.current?E(b.current.duration):"0:00")))):r().createElement("div",{className:"w-full h-full flex items-center justify-center text-white"},r().createElement("p",null,"No video available"))),r().createElement("div",{className:"p-4 border-t border-b"},r().createElement("div",{className:"flex items-center"},r().createElement("span",{className:"text-sm font-medium text-gray-700 mr-3"},"Heatmap Intensity:"),r().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:p,onChange:function(e){return g(parseFloat(e.target.value))},className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r().createElement("span",{className:"ml-2 text-sm text-gray-600"},Math.round(100*p),"%"))),r().createElement("div",{className:"p-4"},r().createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"Key Frames"),r().createElement("div",{className:"flex overflow-x-auto pb-2 space-x-2"},y.map((function(e,t){return r().createElement("div",{key:t,className:"relative cursor-pointer flex-shrink-0 ".concat(c===t?"ring-2 ring-purple-600":""),onClick:function(){return function(e){if(b.current){s(e);var t=b.current,a=t.duration/y.length*e;t.currentTime=a,x(e)}}(t)}},r().createElement("div",{className:"w-20 h-12 bg-gray-200 flex items-center justify-center overflow-hidden"},r().createElement("div",{className:"absolute inset-0 bg-gradient-to-b ".concat(e.probability_fake>.6?"from-red-500":e.probability_fake>.4?"from-yellow-500":"from-green-500"," to-transparent opacity-30")}),r().createElement("span",{className:"text-xs text-gray-800 z-10"},t+1)),r().createElement("div",{className:"h-1 ".concat(e.probability_fake>.6?"bg-red-500":e.probability_fake>.4?"bg-yellow-500":"bg-green-500")}))})))),r().createElement("div",{className:"p-4 bg-gray-50"},r().createElement("h3",{className:"text-sm font-medium text-gray-700 mb-3"},"Analysis Insights"),r().createElement("div",{className:"text-sm text-gray-600"},r().createElement("p",null,"This heatmap visualizes potential manipulated areas in the video. Red regions indicate higher probability of manipulation based on our AI detection model."),r().createElement("div",{className:"mt-3 grid grid-cols-2 gap-2"},r().createElement("div",{className:"bg-white p-3 rounded-lg shadow-sm"},r().createElement("div",{className:"text-xs text-gray-500"},"Peak Manipulation"),r().createElement("div",{className:"font-bold text-lg text-gray-800"},Math.max.apply(Math,n(y.map((function(e){return e.probability_fake||0}))))>0?"".concat((100*Math.max.apply(Math,n(y.map((function(e){return e.probability_fake||0}))))).toFixed(1),"%"):"N/A")),r().createElement("div",{className:"bg-white p-3 rounded-lg shadow-sm"},r().createElement("div",{className:"text-xs text-gray-500"},"Suspicious Frames"),r().createElement("div",{className:"font-bold text-lg text-gray-800"},y.filter((function(e){return(e.probability_fake||0)>.5})).length," of ",y.length))))))}})(),ManipulationHeatmap=t})();